#!/usr/bin/env bash
# Setup script to make buildpack scripts executable

set -e

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
BP_DIR="$(dirname "$SCRIPT_DIR")"

echo "Setting up Heroku Bun Buildpack..."

# Make all scripts in bin/ executable
chmod +x "$BP_DIR/bin/detect"
chmod +x "$BP_DIR/bin/compile"
chmod +x "$BP_DIR/bin/release"
chmod +x "$BP_DIR/bin/setup"

# Make library scripts executable (in case they need to be sourced)
chmod +x "$BP_DIR/lib/json.sh"
chmod +x "$BP_DIR/lib/utils.sh"

echo "âœ… All buildpack scripts are now executable"
echo "ðŸ“¦ Bun buildpack is ready to use!"
echo
echo "To use this buildpack with your Heroku app:"
echo "  heroku buildpacks:set file://$(realpath "$BP_DIR")"
echo
echo "Or push to a Git repository and use:"
echo "  heroku buildpacks:set https://github.com/your-username/heroku-buildpack-bun"
